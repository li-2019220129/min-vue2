{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/gloablApi.js","../src/compiler/index.js","../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/observe/watcher.js","../src/state.js","../src/vdom/index.js","../src/lifecycle.js","../src/init.js","../src/index.js"],"sourcesContent":["let strats = {};\r\nconst LIFECYCLE = [\"beforeCreate\", \"created\"];\r\n\r\nLIFECYCLE.forEach((hook) => {\r\n  strats[hook] = function (p, c) {\r\n    if (c) {\r\n      if (p) {\r\n        return p.concat(c);\r\n      } else {\r\n        return [c];\r\n      }\r\n    } else {\r\n      return p;\r\n    }\r\n  };\r\n});\r\n\r\nexport function mergeOptions(parent, child) {\r\n  const options = {};\r\n  for (let key in parent) {\r\n    mergeField(key);\r\n  }\r\n  for (let key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key);\r\n    }\r\n  }\r\n  function mergeField(key) {\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parent[key], child[key]);\r\n    } else {\r\n      options[key] = child[key] || parent[key];\r\n    }\r\n  }\r\n  return options;\r\n}\r\n","import { mergeOptions } from \"./utils\";\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.options = {};\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin);\r\n    return this;\r\n  };\r\n}\r\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute =\r\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst defaultTagRE = /{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\nfunction genProps(attrs) {\r\n  let str = \"\";\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    if (attrs[i].name === \"style\") {\r\n      let styleObj = {};\r\n      attrs[i].value.split(\";\").forEach((item) => {\r\n        let [key, value] = item.split(\":\");\r\n        key = key.trim();\r\n        styleObj[key] = value;\r\n      });\r\n      attrs[i].value = styleObj;\r\n    }\r\n    str += `${attrs[i].name}:${JSON.stringify(attrs[i].value)},`;\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction gen(node) {\r\n  if (node.type === 1) {\r\n    return codeGen(node);\r\n  } else {\r\n    const text = node.text;\r\n    let boolean = text.match(defaultTagRE);\r\n    if (!boolean) {\r\n      return `_v(${JSON.stringify(text)})`;\r\n    } else {\r\n      let tokens = [];\r\n      let match;\r\n      defaultTagRE.lastIndex = 0;\r\n      let lastIndex = 0;\r\n      while ((match = defaultTagRE.exec(text))) {\r\n        let index = match.index;\r\n        if (index > lastIndex) {\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`);\r\n        lastIndex = index + match[0].length;\r\n      }\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n      }\r\n      return `_v(${tokens.join(\"+\")})`;\r\n    }\r\n  }\r\n}\r\nfunction genChildren(children) {\r\n  return children.map((child) => gen(child)).join(\",\");\r\n}\r\nfunction codeGen(ast) {\r\n  let children = genChildren(ast.children);\r\n  let code = `_c('${ast.tag}',${\r\n    ast.attrs.length ? genProps(ast.attrs) : \"null\"\r\n  }${ast.children.length ? `,${children}` : \"\"})`;\r\n  return code;\r\n}\r\nfunction parseHTML(html) {\r\n  const stack = [];\r\n  const ELEMENT_TYPE = 1;\r\n  const TEXT_TYPE = 3;\r\n  let currentParent;\r\n  let root;\r\n\r\n  function createASTElement(tag, attrs, parent) {\r\n    return {\r\n      tag,\r\n      attrs,\r\n      parent,\r\n      type: ELEMENT_TYPE,\r\n      children: [],\r\n    };\r\n  }\r\n  function start(tag, attrs) {\r\n    let node = createASTElement(tag, attrs, currentParent);\r\n    if (!root) {\r\n      root = node;\r\n    }\r\n    if (currentParent) {\r\n      node.parent = currentParent;\r\n      currentParent.children.push(node);\r\n    }\r\n    stack.push(node);\r\n    currentParent = node;\r\n  }\r\n  function chars(text) {\r\n    text = text.replace(/\\s*/g, \"\");\r\n    text &&\r\n      currentParent.children.push({\r\n        type: TEXT_TYPE,\r\n        text,\r\n        parent: currentParent,\r\n      });\r\n  }\r\n  function end(tag) {\r\n    stack.pop();\r\n    currentParent = stack[stack.length - 1];\r\n  }\r\n  function advance(n) {\r\n    html = html.substring(n);\r\n  }\r\n  function parseStartTag() {\r\n    let start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n      };\r\n      advance(start[0].length);\r\n      let end;\r\n      while (!(end = html.match(startTagClose)) && html.match(attribute)) {\r\n        const attrs = html.match(attribute);\r\n        match.attrs.push({\r\n          name: attrs[1],\r\n          value: attrs[3] || attrs[4] || attrs[5] | true,\r\n        });\r\n        advance(attrs[0].length);\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n      return match;\r\n      // console.log(match);\r\n      // console.log(html);\r\n    }\r\n    return false;\r\n  }\r\n  while (html) {\r\n    let textEnd = html.indexOf(\"<\");\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n      const endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        end(endTagMatch[1]);\r\n        advance(endTagMatch[0].length);\r\n        continue;\r\n      }\r\n    }\r\n    if (textEnd > 0) {\r\n      const text = html.substring(0, textEnd);\r\n      if (text) {\r\n        chars(text);\r\n        advance(text.length);\r\n      }\r\n    }\r\n  }\r\n  return root;\r\n}\r\nexport function compileToFunction(template) {\r\n  //1.将template转换成ast语法树\r\n  //2生成render方法（render方法执行后，会生成虚拟dom）\r\n  let ast = parseHTML(template);\r\n  // console.log(ast, \"ast\");\r\n  let code = codeGen(ast);\r\n  code = `with(this){return ${code}}`;\r\n  // console.log(code);\r\n  let render = new Function(code);\r\n  return render;\r\n}\r\n","let oldArrayProto = Array.prototype;\r\n\r\nexport let arrayMethods = Object.create(oldArrayProto);\r\n\r\nlet methods = [\"pop\", \"unshift\", \"shift\", \"splice\", \"reverse\", \"sort\", \"push\"];\r\n\r\nmethods.forEach((key) => {\r\n  arrayMethods[key] = function (...args) {\r\n    const ob = this.__ob__;\r\n    let res;\r\n    switch (key) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        res = args;\r\n        break;\r\n      case \"splice\":\r\n        res = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (res) {\r\n      ob.observeArray(res);\r\n    }\r\n    ob.dep.notify();\r\n    return oldArrayProto[key].apply(this, args);\r\n  };\r\n});\r\n","let id = 0;\r\nclass Dep {\r\n  constructor() {\r\n    this.id = id++;\r\n    this.subs = [];\r\n  }\r\n  depend() {\r\n    Dep.target.addDep(this);\r\n  }\r\n  addSub(watcher) {\r\n    debugger;\r\n    this.subs.push(watcher);\r\n  }\r\n  notify() {\r\n    this.subs.forEach((watcher) => watcher.update());\r\n  }\r\n}\r\nDep.target = null;\r\n\r\nlet stack = [];\r\nexport function pushTarget(watcher) {\r\n  stack.push(watcher);\r\n  Dep.target = watcher;\r\n  console.log(stack);\r\n}\r\nexport function popTarget() {\r\n  stack.pop();\r\n  Dep.target = stack[stack.length - 1];\r\n}\r\nexport default Dep;\r\n","import { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\nclass Observer {\r\n  constructor(data) {\r\n    // 给每个对象和数组都增加收集功能\r\n    this.dep = new Dep(); //$set做准备\r\n\r\n    Object.defineProperty(data, \"__ob__\", {\r\n      enumerable: false,\r\n      value: this,\r\n    });\r\n    if (Array.isArray(data)) {\r\n      //重写数组方法，这样数据变化就可以监控到\r\n      Object.setPrototypeOf(data, arrayMethods);\r\n      this.observeArray(data);\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  observeArray(data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      observe(data[i]);\r\n    }\r\n  }\r\n  walk(data) {\r\n    Object.keys(data).forEach((item) => {\r\n      defineReactive(data, item, data[item]);\r\n    });\r\n  }\r\n}\r\n\r\nfunction dependArray(value) {\r\n  for (let i = 0; i < value.length; i++) {\r\n    let current = value[i];\r\n    current.__ob__ && current.__ob__.dep.depend();\r\n    if (Array.isArray(current)) {\r\n      dependArray(current);\r\n    }\r\n  }\r\n}\r\nexport function defineReactive(obj, key, val) {\r\n  let childOb = observe(val); // 递归对嵌套对象进行响应式处理（性能不好，所以vue3 proxy 只在数据get 的时候判断是对象的话才去处理）\r\n  let dep = new Dep();\r\n  Object.defineProperty(obj, key, {\r\n    get() {\r\n      if (Dep.target) {\r\n        dep.depend(); //让这个属性的dep去存放这个watcher\r\n        if (childOb) {\r\n          //对于整个数组和对象都要进行收集依赖，不仅仅是属性\r\n          childOb.dep.depend();\r\n          if (Array.isArray(val)) {\r\n            dependArray(val);\r\n          }\r\n        }\r\n      }\r\n      return val;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === val) return;\r\n      observe(newValue);\r\n      val = newValue;\r\n      dep.notify();\r\n      // console.log(val, \"数据变动了\");\r\n    },\r\n  });\r\n}\r\n\r\nexport function observe(data) {\r\n  if (typeof data !== \"object\" || data === null) return;\r\n  if (data.__ob__ instanceof Observer) {\r\n    return data__ob__;\r\n  }\r\n  return new Observer(data);\r\n}\r\n","import Dep, { popTarget, pushTarget } from \"./dep\";\r\n\r\nlet uid = 0;\r\n\r\n// 1.当我们创建渲染函数的时候我们会把当前的渲染watcher放到Dep.target上\r\n// 2.调用_render()会取值走到get上\r\nclass Watcher {\r\n  //不同组件有不同的watcher，每个组件都会去new Watcher，可以做到局部更新\r\n  constructor(vm, exprOrFn, options, cb) {\r\n    this.id = uid++;\r\n    this.vm = vm;\r\n    this.renderWatcher = options; //一个渲染watcher\r\n    this.depsId = new Set();\r\n    this.cb = cb;\r\n    this.deps = []; //后续实现computed 和一些清理工作需要的\r\n    if (typeof exprOrFn == \"string\") {\r\n      this.getter = function () {\r\n        return vm[exprOrFn];\r\n      };\r\n    } else {\r\n      this.getter = exprOrFn;\r\n    }\r\n    this.lazy = options && options.lazy;\r\n    this.dirty = this.lazy; //缓存值\r\n    this.user = options && options.user;\r\n    this.value = this.lazy ? undefined : this.get();\r\n  }\r\n  get() {\r\n    pushTarget(this);\r\n    let value = this.getter.call(this.vm);\r\n    popTarget();\r\n    return value;\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id;\r\n    if (!this.depsId.has(id)) {\r\n      this.deps.push(dep);\r\n      this.depsId.add(id);\r\n      dep.addSub(this);\r\n    }\r\n  }\r\n  evaluate() {\r\n    this.value = this.get();\r\n    this.dirty = false;\r\n  }\r\n  depend() {\r\n    let i = this.deps.length;\r\n    while (i--) {\r\n      this.deps[i].depend();\r\n    }\r\n  }\r\n  run() {\r\n    let oldValue = this.value;\r\n    let newValue = this.get();\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newValue, oldValue);\r\n    }\r\n  }\r\n  update() {\r\n    if (this.lazy) {\r\n      // 如果是计算属性，依赖的值发生了变化就标识计算属性的值是脏数据了\r\n      this.dirty = true;\r\n    } else {\r\n      // this.get();\r\n      queueWatcher(this); //异步更新\r\n    }\r\n  }\r\n}\r\n\r\nlet queue = [];\r\nlet has = {};\r\nlet pending = false;\r\n\r\nfunction flushSchedulerQueue() {\r\n  let flushQueue = queue.slice(0);\r\n  flushQueue.forEach((queue) => queue.run());\r\n  queue = [];\r\n  has = {};\r\n  pending = false;\r\n}\r\nfunction queueWatcher(watcher) {\r\n  let id = watcher.id;\r\n  if (has[id] == null) {\r\n    queue.push(watcher);\r\n    has[id] = true;\r\n\r\n    if (!pending) {\r\n      nextTick(flushSchedulerQueue);\r\n      pending = true;\r\n    }\r\n    //异步更新\r\n  }\r\n}\r\n\r\nlet callbacks = [];\r\nlet waiting = false;\r\n\r\nfunction flushCallbacks() {\r\n  let cbs = callbacks.slice(0); //拷贝的目的是在代码运行中callbacks 可能会添加新的数据，但他要放到下次去调用而不是现在\r\n  waiting = true;\r\n  callbacks = [];\r\n  cbs.forEach((cb) => cb()); //按顺序依次执行\r\n}\r\n\r\n//nextTick 的逻辑是维护了一个任务队列，\r\n//但这个任务的执行是放到异步里面执行的，\r\n//数据更改后的异步跟新也是用的这个逻辑，\r\n//而且是和自己在代码里面使用nextTick是有顺序的，\r\n//谁在前面谁先执行，这样当我在代码里面先调用nextTick,\r\n//然后更改数据，nextTick里面拿到的dom里的数据还是旧的，\r\n//因为添加的任务数组中，渲染逻辑函数在后面，\r\n//所以先执行了自己的逻辑，然后执行了渲染的逻辑，\r\n//所以拿到的dom里的数据是旧的。\r\n\r\n// nextTick没有直接使用某个api,而是采用了优雅降级的方式，\r\n// 内部先采用的是promise（ie 不兼容） MutationObserver（h5的api）  （ie共享）setImmediate setTimeout\r\n\r\nlet timerFunc;\r\nif (Promise) {\r\n  timerFunc = () => {\r\n    Promise.resolve().then(flushCallbacks);\r\n  };\r\n} else if (MutationObserver) {\r\n  let observer = new MutationObserver(flushCallbacks); //这里传入的回调是异步执行的\r\n  observer.observe(textNode, {\r\n    characterData: true,\r\n  });\r\n  timerFunc = () => {\r\n    textNode.textContent = 2;\r\n  };\r\n} else if (setImmediate) {\r\n  timerFunc = () => {\r\n    setImmediate(flushCallbacks);\r\n  };\r\n} else {\r\n  timerFunc = () => {\r\n    setTimeout(flushCallbacks);\r\n  };\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  callbacks.push(cb);\r\n  if (!waiting) {\r\n    timerFunc();\r\n    waiting = true;\r\n  }\r\n}\r\n\r\n// 需要给每个属性增加一个dep，其目的是为了收集观察者，当属性发生变化时，通知观察者更新\r\n// 一个视图中会有n个属性，（n个属性对应一个视图） n个dep对应一个watcher\r\n// 一个属性对应多个视图（多对多）\r\nexport default Watcher;\r\n","import { observe } from \"./observe\";\r\nimport Dep from \"./observe/dep\";\r\nimport Watcher from \"./observe/watcher\";\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options;\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm);\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm);\r\n  }\r\n}\r\n\r\nfunction initWatch(vm) {\r\n  let watch = vm.$options.watch;\r\n  for (let key in watch) {\r\n    const handler = watch[key];\r\n    if (Array.isArray(handler)) {\r\n      for (let i = 0; i < handler.length; i++) {\r\n        createWatcher(vm, key, handler[i]);\r\n      }\r\n    } else {\r\n      createWatcher(vm, key, handler);\r\n    }\r\n  }\r\n}\r\n\r\nfunction createWatcher(vm, key, handler) {\r\n  if (typeof handler === \"string\") {\r\n    handler = vm[handler];\r\n  }\r\n  return vm.$watch(key, handler);\r\n}\r\n\r\nfunction proxy(vm, target, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[target][key];\r\n    },\r\n    set(newValue) {\r\n      vm[target][key] = newValue;\r\n    },\r\n  });\r\n}\r\nexport function initData(vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\r\n  for (let key in data) {\r\n    proxy(vm, \"_data\", key);\r\n  }\r\n  observe(data);\r\n}\r\n\r\nfunction initComputed(vm) {\r\n  let computed = vm.$options.computed;\r\n  const watcher = (vm._computedWatcher = {});\r\n  for (let key in computed) {\r\n    let userDef = computed[key];\r\n    const getter = typeof userDef === \"function\" ? userDef : userDef.get;\r\n    console.log(getter, \"getter\");\r\n    watcher[key] = new Watcher(vm, getter, {\r\n      lazy: true,\r\n    });\r\n    defineComputed(vm, key, userDef);\r\n  }\r\n}\r\n\r\nfunction defineComputed(target, key, userDef) {\r\n  const setter = userDef.set || (() => {});\r\n  Object.defineProperty(target, key, {\r\n    get: createComputedGetter(key),\r\n    set: setter,\r\n  });\r\n}\r\n\r\n// 计算属性根本不会收集依赖，只会让自己依赖的属性去收集依赖\r\nfunction createComputedGetter(key) {\r\n  return function () {\r\n    const watcher = this._computedWatcher[key];\r\n    if (watcher.dirty) {\r\n      watcher.evaluate();\r\n    }\r\n    if (Dep.target) {\r\n      //计算属性出栈后如果还有渲染watcher，则应该让计算属性watcher里面的属性也去收集上一层watcher\r\n      watcher.depend();\r\n    }\r\n    return watcher.value;\r\n  };\r\n}\r\n","//h() _c()\r\n// _c('div',{},...children)\r\nexport function createElementVNode(vm, tag, data = {}, ...children) {\r\n  data = data ?? {};\r\n  let key = data.key;\r\n  if (key) {\r\n    delete data.key;\r\n  }\r\n  return vnode(vm, tag, key, data, children);\r\n}\r\n\r\n// _v('text')\r\nexport function createTextVNode(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\n//ast一样吗？ ast做的是语法层面的转化 他描述的是语法本身\r\n// 虚拟dom描述的是dom元素,可以增加一些自定义属性\r\nfunction vnode(vm, tag, key, data, children, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    key,\r\n    data,\r\n    children,\r\n    text,\r\n  };\r\n}\r\n","import Watcher from \"./observe/watcher\";\r\nimport { createElementVNode, createTextVNode } from \"./vdom\";\r\n\r\nfunction createElm(vnode) {\r\n  let { tag, data, children, text } = vnode;\r\n  if (typeof tag === \"string\") {\r\n    vnode.el = document.createElement(tag);\r\n\r\n    patchProps(vnode.el, data);\r\n    children.forEach((child) => {\r\n      vnode.el.appendChild(createElm(child));\r\n    });\r\n  } else {\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\nfunction patchProps(el, props) {\r\n  for (let key in props) {\r\n    if (key === \"style\") {\r\n      for (let styleName in props.style) {\r\n        el.style[styleName] = props.style[styleName];\r\n      }\r\n    } else {\r\n      el.setAttribute(key, props[key]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction patch(oldVnode, vnode) {\r\n  const isRealElement = oldVnode.nodeType;\r\n  if (isRealElement) {\r\n    const elm = oldVnode;\r\n    const parentElm = elm.parentNode;\r\n    const newElm = createElm(vnode);\r\n    parentElm.insertBefore(newElm, elm.nextSibling);\r\n    parentElm.removeChild(elm);\r\n    return newElm;\r\n  } else {\r\n    //diff算法\r\n  }\r\n}\r\n\r\nexport function initLifecycle(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    // console.log(\"_upload\", vnode);\r\n    const vm = this;\r\n    const el = vm.$el;\r\n    vm.$el = patch(el, vnode);\r\n  };\r\n\r\n  // _c('div',{},...children)\r\n  Vue.prototype._c = function () {\r\n    return createElementVNode(this, ...arguments);\r\n  };\r\n\r\n  // _v()\r\n  Vue.prototype._v = function () {\r\n    console.log(createTextVNode(this, ...arguments), \"12122111\");\r\n    return createTextVNode(this, ...arguments);\r\n  };\r\n  Vue.prototype._s = function (value) {\r\n    if (typeof value !== \"object\") return value;\r\n    return JSON.stringify(value);\r\n  };\r\n  Vue.prototype._render = function () {\r\n    //当渲染的时候会去实例中取值，我们就可以将属性和视图绑定在一起\r\n    let vm = this;\r\n    return vm.$options.render.call(vm);\r\n  };\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  vm.$el = el;\r\n  // 1. 调用render方法产生虚拟dom\r\n  const uploadComponent = () => {\r\n    vm._update(vm._render());\r\n  };\r\n  //数据变化重新渲染视图\r\n  new Watcher(vm, uploadComponent, true);\r\n  // 2. 根据虚拟dom产生真实dom\r\n  // 3. 插入到el\r\n}\r\n\r\n// vue 核心流程 （1）创造了响应式数据 （2）模板转换成ast语法树\r\n// （3）将ast 转换成渲染函数 （4）将渲染函数执行后产生虚拟dom （5）根据虚拟dom 生成真实dom\r\n\r\nexport function callHook(vm, hook) {\r\n  const handlers = vm.$options[hook];\r\n  if (handlers) {\r\n    handlers.forEach((handler) => handler.call(vm));\r\n  }\r\n}\r\n","import { compileToFunction } from \"./compiler\";\r\nimport { initState } from \"./state\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { mergeOptions } from \"./utils\";\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    //我们定义的全局指令和过滤器。。。。都会挂载到实例上\r\n    this.$options = mergeOptions(this.constructor.options, options);\r\n    callHook(this, \"beforeCreate\");\r\n    //初始化状态\r\n    initState(this);\r\n    callHook(this, \"created\");\r\n\r\n    if (options.el) {\r\n      this.$mount(options.el);\r\n    }\r\n  };\r\n  Vue.prototype.$mount = function (el) {\r\n    el = document.querySelector(el);\r\n    let vm = this;\r\n    let ops = vm.$options;\r\n    if (!ops.render) {\r\n      let template = ops.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      if (template) {\r\n        let render = compileToFunction(template);\r\n        ops.render = render;\r\n      }\r\n    }\r\n    // console.log(ops.render, \"render\");\r\n    mountComponent(vm, el);\r\n  };\r\n}\r\n","import { initGlobalApi } from \"./gloablApi\";\r\nimport { initMixin } from \"./init\";\r\nimport { initLifecycle } from \"./lifecycle\";\r\nimport Watcher, { nextTick } from \"./observe/watcher\";\r\n\r\nfunction Vue(options) {\r\n  // vue初始化操作\r\n  this._init(options);\r\n}\r\n\r\nVue.prototype.$nextTick = nextTick;\r\n// 初始化操作\r\ninitMixin(Vue);\r\n\r\ninitLifecycle(Vue);\r\n\r\ninitGlobalApi(Vue);\r\nVue.prototype.$watch = function (exprOrFn, cb) {\r\n  new Watcher(\r\n    this,\r\n    exprOrFn,\r\n    {\r\n      user: true,\r\n    },\r\n    cb\r\n  );\r\n};\r\nexport default Vue;\r\n"],"names":["strats","LIFECYCLE","forEach","hook","p","c","concat","mergeOptions","parent","child","options","key","mergeField","hasOwnProperty","initGlobalApi","Vue","mixin","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","genProps","attrs","str","_loop","i","name","styleObj","value","split","item","_item$split","_item$split2","_slicedToArray","trim","JSON","stringify","length","slice","gen","node","type","codeGen","text","boolean","match","tokens","lastIndex","exec","index","push","join","genChildren","children","map","ast","code","tag","parseHTML","html","stack","ELEMENT_TYPE","TEXT_TYPE","currentParent","root","createASTElement","start","chars","replace","end","pop","advance","n","substring","parseStartTag","tagName","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","template","render","Function","oldArrayProto","Array","prototype","arrayMethods","Object","create","methods","ob","__ob__","res","_len","arguments","args","_key","observeArray","dep","notify","apply","id","Dep","_classCallCheck","subs","_createClass","depend","target","addDep","addSub","watcher","update","pushTarget","console","log","popTarget","Observer","data","defineProperty","enumerable","isArray","setPrototypeOf","walk","observe","keys","defineReactive","dependArray","current","obj","val","childOb","get","set","newValue","_typeof","data__ob__","uid","Watcher","vm","exprOrFn","cb","renderWatcher","depsId","Set","deps","getter","lazy","dirty","user","undefined","call","has","add","evaluate","run","oldValue","queueWatcher","queue","pending","flushSchedulerQueue","flushQueue","nextTick","callbacks","waiting","flushCallbacks","cbs","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","characterData","textContent","setImmediate","setTimeout","initState","opts","$options","initData","computed","initComputed","watch","initWatch","handler","createWatcher","$watch","proxy","_data","_computedWatcher","userDef","defineComputed","setter","createComputedGetter","createElementVNode","vnode","createTextVNode","createElm","el","document","createElement","patchProps","appendChild","createTextNode","props","styleName","style","setAttribute","patch","oldVnode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","initLifecycle","_update","$el","_c","_v","_s","_render","mountComponent","uploadComponent","callHook","handlers","initMixin","_init","constructor","$mount","querySelector","ops","outerHTML","$nextTick"],"mappings":"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"}